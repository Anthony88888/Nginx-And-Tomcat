<!DOCTYPE html>
<html>
<head>
<title>chapter009-01-Nginx基础安装.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: "Segoe WPC", "Segoe UI", "SFUIText-Light", "HelveticaNeue-Light", sans-serif, "Droid Sans Fallback";
	font-size: 14px;
	padding: 0 12px;
	line-height: 22px;
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}


body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	color: #4080D0;
	text-decoration: none;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

h1 code,
h2 code,
h3 code,
h4 code,
h5 code,
h6 code {
	font-size: inherit;
	line-height: auto;
}

a:hover {
	color: #4080D0;
	text-decoration: underline;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left: 5px solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 14px;
	line-height: 19px;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

.mac code {
	font-size: 12px;
	line-height: 18px;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

/** Theming */

.vscode-light,
.vscode-light pre code {
	color: rgb(30, 30, 30);
}

.vscode-dark,
.vscode-dark pre code {
	color: #DDD;
}

.vscode-high-contrast,
.vscode-high-contrast pre code {
	color: white;
}

.vscode-light code {
	color: #A31515;
}

.vscode-dark code {
	color: #D7BA7D;
}

.vscode-light pre:not(.hljs),
.vscode-light code > div {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre:not(.hljs),
.vscode-dark code > div {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre:not(.hljs),
.vscode-high-contrast code > div {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

.vscode-light blockquote,
.vscode-dark blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.vscode-high-contrast blockquote {
	background: transparent;
	border-color: #fff;
}
</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family:  "Meiryo", "Segoe WPC", "Segoe UI", "SFUIText-Light", "HelveticaNeue-Light", sans-serif, "Droid Sans Fallback";
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

</head>
<body>
<h2 id="%E7%AC%AC%E4%B9%9D%E7%AB%A0-nginx-%E6%9C%8D%E5%8A%A1%E5%99%A8">第九章 Nginx 服务器</h2>
<h3 id="%E7%AC%AC%E4%B8%80%E8%8A%82-nginx-%E5%9F%BA%E7%A1%80%E5%AE%89%E8%A3%85">第一节  Nginx 基础安装</h3>
<p>   Nginx是当下作为流行和方便使用的 web 服务器和负载均衡器</p>
<h4 id="911-centos76-%E4%B8%AD-yum-%E5%AE%89%E8%A3%85-nginx">9.1.1 CentOS7.6 中 yum 安装 Nginx</h4>
<ol>
<li>我们准备一台新装的 CentOS7.6 服务器， 关闭 selinux， 清空 iptables 规则， 使用 yum 安装 nginx</li>
</ol>
<pre class="hljs"><code><div>[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># setenforce 0</span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># getenforce </span>
Permissive
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># yum remove -y firewalld</span>
Loaded plugins: fastestmirror
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package firewalld.noarch 0:0.5.3-5.el7 will be erased
--&gt; Finished Dependency Resolution

Dependencies Resolved

=============================================================================================
 Package              Arch              Version                   Repository            Size
=============================================================================================
Removing:
 firewalld            noarch            0.5.3-5.el7               @anaconda            1.8 M

Transaction Summary
=============================================================================================
Remove  1 Package

Installed size: 1.8 M
Downloading packages:
Running transaction check
Running transaction <span class="hljs-built_in">test</span>
Transaction <span class="hljs-built_in">test</span> succeeded
Running transaction
  Erasing    : firewalld-0.5.3-5.el7.noarch                                              1/1 
  Verifying  : firewalld-0.5.3-5.el7.noarch                                              1/1 

Removed:
  firewalld.noarch 0:0.5.3-5.el7                                                             

Complete!
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># iptables -vnL</span>
Chain INPUT (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt <span class="hljs-keyword">in</span>     out     <span class="hljs-built_in">source</span>               destination         

Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt <span class="hljs-keyword">in</span>     out     <span class="hljs-built_in">source</span>               destination         

Chain OUTPUT (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt <span class="hljs-keyword">in</span>     out     <span class="hljs-built_in">source</span>               destination         
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment">#</span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># yum install nginx</span>
Loaded plugins: fastestmirror
Determining fastest mirrors
 * base: mirrors.tuna.tsinghua.edu.cn
 * extras: mirror.bit.edu.cn
 * updates: mirrors.tuna.tsinghua.edu.cn
base                                                                  | 3.6 kB  00:00:00     
extras                                                                | 3.4 kB  00:00:00     
updates                                                               | 3.4 kB  00:00:00     
(1/4): base/7/x86_64/group_gz                                         | 166 kB  00:00:00     
(2/4): updates/7/x86_64/primary_db                                    | 5.0 MB  00:00:01     
(3/4): extras/7/x86_64/primary_db                                     | 200 kB  00:00:02     
(4/4): base/7/x86_64/primary_db                                       | 6.0 MB  00:02:33     
No package nginx available.
Error: Nothing to <span class="hljs-keyword">do</span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment">#</span>
</div></code></pre>
<p>上图中安装 Nginx 失败， 原因是默认的 yum base 仓库中没有 nginx 软件包， 我们需要使用 epel 源进行 nginx 的安装</p>
<pre class="hljs"><code><div>[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># yum install -y epel-release</span>
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirrors.tuna.tsinghua.edu.cn
 * extras: mirror.bit.edu.cn
 * updates: mirrors.tuna.tsinghua.edu.cn
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package epel-release.noarch 0:7-11 will be installed
--&gt; Finished Dependency Resolution

Dependencies Resolved

=============================================================================================
 Package                   Arch                Version             Repository           Size
=============================================================================================
Installing:
 epel-release              noarch              7-11                extras               15 k

Transaction Summary
=============================================================================================
Install  1 Package

Total download size: 15 k
Installed size: 24 k
Downloading packages:
warning: /var/cache/yum/x86_64/7/extras/packages/epel-release-7-11.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEY
Public key <span class="hljs-keyword">for</span> epel-release-7-11.noarch.rpm is not installed
epel-release-7-11.noarch.rpm                                          |  15 kB  00:00:04     
Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7
Importing GPG key 0xF4A80EB5:
 Userid     : <span class="hljs-string">"CentOS-7 Key (CentOS 7 Official Signing Key) &lt;security@centos.org&gt;"</span>
 Fingerprint: 6341 ab27 53d7 8a78 a7c2 7bb1 24c6 a8a7 f4a8 0eb5
 Package    : centos-release-7-6.1810.2.el7.centos.x86_64 (@anaconda)
 From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7
Running transaction check
Running transaction <span class="hljs-built_in">test</span>
Transaction <span class="hljs-built_in">test</span> succeeded
Running transaction
  Installing : epel-release-7-11.noarch                                                  1/1 
  Verifying  : epel-release-7-11.noarch                                                  1/1 

Installed:
  epel-release.noarch 0:7-11                                                                 

Complete!
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># yum list nginx</span>
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
epel/x86_64/metalink                                                  | 6.5 kB  00:00:00     
 * base: mirrors.tuna.tsinghua.edu.cn
 * epel: mirrors.tuna.tsinghua.edu.cn
 * extras: mirror.bit.edu.cn
 * updates: mirrors.tuna.tsinghua.edu.cn
epel                                                                  | 4.7 kB  00:00:00     
(1/3): epel/x86_64/group_gz                                           |  88 kB  00:00:00     
(2/3): epel/x86_64/updateinfo                                         | 1.0 MB  00:00:00     
(3/3): epel/x86_64/primary_db                                         | 6.7 MB  00:00:02     
Available Packages
nginx.x86_64                               1:1.12.2-3.el7                                epel
[root@localhost ~]<span class="hljs-comment">#</span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># yum install -y nginx</span>
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirrors.tuna.tsinghua.edu.cn
 * epel: mirrors.tuna.tsinghua.edu.cn
 * extras: mirror.bit.edu.cn
 * updates: mirrors.tuna.tsinghua.edu.cn
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package nginx.x86_64 1:1.12.2-3.el7 will be installed
--&gt; Processing Dependency: nginx-all-modules = 1:1.12.2-3.el7 <span class="hljs-keyword">for</span> package: 1:nginx-1.12.2-3.el7.x86_64
--&gt; Processing Dependency: nginx-filesystem = 1:1.12.2-3.el7 <span class="hljs-keyword">for</span> package: 1:nginx-1.12.2-3.el7.x86_64
--&gt; Processing Dependency: nginx-filesystem <span class="hljs-keyword">for</span> package: 1:nginx-1.12.2-3.el7.x86_64
--&gt; Processing Dependency: libprofiler.so.0()(64bit) <span class="hljs-keyword">for</span> package: 1:nginx-1.12.2-3.el7.x86_64
.
.
.省略部分安装输出信息.....
.
.
Installed:
  nginx.x86_64 1:1.12.2-3.el7                                                                

Dependency Installed:
  dejavu-fonts-common.noarch 0:2.33-6.el7                                                    
  dejavu-sans-fonts.noarch 0:2.33-6.el7                                                      
  fontconfig.x86_64 0:2.13.0-4.3.el7                                                         
  fontpackages-filesystem.noarch 0:1.44-8.el7                                                
  gd.x86_64 0:2.0.35-26.el7                                                                  
  gperftools-libs.x86_64 0:2.6.1-1.el7                                                       
  libX11.x86_64 0:1.6.5-2.el7                                                                
  libX11-common.noarch 0:1.6.5-2.el7                                                         
  libXau.x86_64 0:1.0.8-2.1.el7                                                              
  libXpm.x86_64 0:3.5.12-1.el7                                                               
  libjpeg-turbo.x86_64 0:1.2.90-6.el7                                                        
  libxcb.x86_64 0:1.13-1.el7                                                                 
  nginx-all-modules.noarch 1:1.12.2-3.el7                                                    
  nginx-filesystem.noarch 1:1.12.2-3.el7                                                     
  nginx-mod-http-geoip.x86_64 1:1.12.2-3.el7                                                 
  nginx-mod-http-image-filter.x86_64 1:1.12.2-3.el7                                          
  nginx-mod-http-perl.x86_64 1:1.12.2-3.el7                                                  
  nginx-mod-http-xslt-filter.x86_64 1:1.12.2-3.el7                                           
  nginx-mod-mail.x86_64 1:1.12.2-3.el7                                                       
  nginx-mod-stream.x86_64 1:1.12.2-3.el7                                                     
  perl.x86_64 4:5.16.3-294.el7_6                                                             
  perl-Carp.noarch 0:1.26-244.el7                                                            
  perl-Encode.x86_64 0:2.51-7.el7                                                            
  perl-Exporter.noarch 0:5.68-3.el7                                                          
  perl-File-Path.noarch 0:2.09-2.el7                                                         
  perl-File-Temp.noarch 0:0.23.01-3.el7                                                      
  perl-Filter.x86_64 0:1.49-3.el7                                                            
  perl-Getopt-Long.noarch 0:2.40-3.el7                                                       
  perl-HTTP-Tiny.noarch 0:0.033-3.el7                                                        
  perl-PathTools.x86_64 0:3.40-5.el7                                                         
  perl-Pod-Escapes.noarch 1:1.04-294.el7_6                                                   
  perl-Pod-Perldoc.noarch 0:3.20-4.el7                                                       
  perl-Pod-Simple.noarch 1:3.28-4.el7                                                        
  perl-Pod-Usage.noarch 0:1.63-3.el7                                                         
  perl-Scalar-List-Utils.x86_64 0:1.27-248.el7                                               
  perl-Socket.x86_64 0:2.010-4.el7                                                           
  perl-Storable.x86_64 0:2.45-3.el7                                                          
  perl-Text-ParseWords.noarch 0:3.29-4.el7                                                   
  perl-Time-HiRes.x86_64 4:1.9725-3.el7                                                      
  perl-Time-Local.noarch 0:1.2300-2.el7                                                      
  perl-constant.noarch 0:1.27-2.el7                                                          
  perl-libs.x86_64 4:5.16.3-294.el7_6                                                        
  perl-macros.x86_64 4:5.16.3-294.el7_6                                                      
  perl-parent.noarch 1:0.225-244.el7                                                         
  perl-podlators.noarch 0:2.5.1-3.el7                                                        
  perl-threads.x86_64 0:1.87-4.el7                                                           
  perl-threads-shared.x86_64 0:1.43-6.el7                                                    

Complete!
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment">#</span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># rpm -ql nginx</span>
/etc/logrotate.d/nginx
/etc/nginx/fastcgi.conf
/etc/nginx/fastcgi.conf.default
/etc/nginx/fastcgi_params
/etc/nginx/fastcgi_params.default
/etc/nginx/koi-utf
/etc/nginx/koi-win
/etc/nginx/mime.types
/etc/nginx/mime.types.default
/etc/nginx/nginx.conf
/etc/nginx/nginx.conf.default
/etc/nginx/scgi_params
/etc/nginx/scgi_params.default
/etc/nginx/uwsgi_params
/etc/nginx/uwsgi_params.default
/etc/nginx/win-utf
/usr/bin/nginx-upgrade
/usr/lib/systemd/system/nginx.service
/usr/lib64/nginx/modules
/usr/sbin/nginx
/usr/share/doc/nginx-1.12.2
/usr/share/doc/nginx-1.12.2/CHANGES
/usr/share/doc/nginx-1.12.2/README
/usr/share/doc/nginx-1.12.2/README.dynamic
/usr/share/doc/nginx-1.12.2/UPGRADE-NOTES-1.6-to-1.10
/usr/share/licenses/nginx-1.12.2
/usr/share/licenses/nginx-1.12.2/LICENSE
/usr/share/man/man3/nginx.3pm.gz
/usr/share/man/man8/nginx-upgrade.8.gz
/usr/share/man/man8/nginx.8.gz
/usr/share/nginx/html/404.html
/usr/share/nginx/html/50x.html
/usr/share/nginx/html/index.html
/usr/share/nginx/html/nginx-logo.png
/usr/share/nginx/html/poweredby.png
/usr/share/vim/vimfiles/ftdetect/nginx.vim
/usr/share/vim/vimfiles/ftplugin/nginx.vim
/usr/share/vim/vimfiles/indent/nginx.vim
/usr/share/vim/vimfiles/syntax/nginx.vim
/var/lib/nginx
/var/lib/nginx/tmp
/var/<span class="hljs-built_in">log</span>/nginx
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment">#</span>
[root@localhost ~]<span class="hljs-comment"># systemctl start nginx</span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># ss -ntl</span>
State       Recv-Q Send-Q Local Address:Port                Peer Address:Port              
LISTEN      0      128                *:80                             *:*                  
LISTEN      0      128                *:22                             *:*                  
LISTEN      0      100        127.0.0.1:25                             *:*                  
LISTEN      0      128               :::80                            :::*                  
LISTEN      0      128               :::22                            :::*                  
LISTEN      0      100              ::1:25                            :::*                  
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># curl 127.0.0.1</span>
&lt;!DOCTYPE html PUBLIC <span class="hljs-string">"-//W3C//DTD XHTML 1.1//EN"</span> <span class="hljs-string">"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"</span>&gt;

&lt;html xmlns=<span class="hljs-string">"http://www.w3.org/1999/xhtml"</span> xml:lang=<span class="hljs-string">"en"</span>&gt;
    &lt;head&gt;
        &lt;title&gt;Test Page <span class="hljs-keyword">for</span> the Nginx HTTP Server on Fedora&lt;/title&gt;
        &lt;meta http-equiv=<span class="hljs-string">"Content-Type"</span> content=<span class="hljs-string">"text/html; charset=UTF-8"</span> /&gt;
        &lt;style <span class="hljs-built_in">type</span>=<span class="hljs-string">"text/css"</span>&gt;
            /*&lt;![CDATA[*/
            body {
                background-color: <span class="hljs-comment">#fff;</span>
                color: <span class="hljs-comment">#000;</span>
                font-size: 0.9em;
                font-family: sans-serif,helvetica;
                margin: 0;
                padding: 0;
            }
            :link {
                color: <span class="hljs-comment">#c00;</span>
            }
            :visited {
                color: <span class="hljs-comment">#c00;</span>
            }
            a:hover {
                color: <span class="hljs-comment">#f50;</span>
            }
            h1 {
                text-align: center;
                margin: 0;
                padding: 0.6em 2em 0.4em;
                background-color: <span class="hljs-comment">#294172;</span>
                color: <span class="hljs-comment">#fff;</span>
                font-weight: normal;
                font-size: 1.75em;
                border-bottom: 2px solid <span class="hljs-comment">#000;</span>
            }
            h1 strong {
                font-weight: bold;
                font-size: 1.5em;
            }
            h2 {
                text-align: center;
                background-color: <span class="hljs-comment">#3C6EB4;</span>
                font-size: 1.1em;
                font-weight: bold;
                color: <span class="hljs-comment">#fff;</span>
                margin: 0;
                padding: 0.5em;
                border-bottom: 2px solid <span class="hljs-comment">#294172;</span>
            }
            hr {
                display: none;
            }
            .content {
                padding: 1em 5em;
            }
            .alert {
                border: 2px solid <span class="hljs-comment">#000;</span>
            }

            img {
                border: 2px solid <span class="hljs-comment">#fff;</span>
                padding: 2px;
                margin: 2px;
            }
            a:hover img {
                border: 2px solid <span class="hljs-comment">#294172;</span>
            }
            .logos {
                margin: 1em;
                text-align: center;
            }
            /*]]&gt;*/
        &lt;/style&gt;
    &lt;/head&gt;

    &lt;body&gt;
        &lt;h1&gt;Welcome to &lt;strong&gt;nginx&lt;/strong&gt; on Fedora!&lt;/h1&gt;

        &lt;div class=<span class="hljs-string">"content"</span>&gt;
            &lt;p&gt;This page is used to <span class="hljs-built_in">test</span> the proper operation of the
            &lt;strong&gt;nginx&lt;/strong&gt; HTTP server after it has been
            installed. If you can <span class="hljs-built_in">read</span> this page, it means that the
            web server installed at this site is working
            properly.&lt;/p&gt;

            &lt;div class=<span class="hljs-string">"alert"</span>&gt;
                &lt;h2&gt;Website Administrator&lt;/h2&gt;
                &lt;div class=<span class="hljs-string">"content"</span>&gt;
                    &lt;p&gt;This is the default &lt;tt&gt;index.html&lt;/tt&gt; page that
                    is distributed with &lt;strong&gt;nginx&lt;/strong&gt; on
                    Fedora.  It is located <span class="hljs-keyword">in</span>
                    &lt;tt&gt;/usr/share/nginx/html&lt;/tt&gt;.&lt;/p&gt;

                    &lt;p&gt;You should now put your content <span class="hljs-keyword">in</span> a location of
                    your choice and edit the &lt;tt&gt;root&lt;/tt&gt; configuration
                    directive <span class="hljs-keyword">in</span> the &lt;strong&gt;nginx&lt;/strong&gt;
                    configuration file
                    &lt;tt&gt;/etc/nginx/nginx.conf&lt;/tt&gt;.&lt;/p&gt;

                &lt;/div&gt;
            &lt;/div&gt;

            &lt;div class=<span class="hljs-string">"logos"</span>&gt;
                &lt;a href=<span class="hljs-string">"http://nginx.net/"</span>&gt;&lt;img
                    src=<span class="hljs-string">"nginx-logo.png"</span> 
                    alt=<span class="hljs-string">"[ Powered by nginx ]"</span>
                    width=<span class="hljs-string">"121"</span> height=<span class="hljs-string">"32"</span> /&gt;&lt;/a&gt;

                &lt;a href=<span class="hljs-string">"http://fedoraproject.org/"</span>&gt;&lt;img 
                    src=<span class="hljs-string">"poweredby.png"</span> 
                    alt=<span class="hljs-string">"[ Powered by Fedora ]"</span> 
                    width=<span class="hljs-string">"88"</span> height=<span class="hljs-string">"31"</span> /&gt;&lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
[root@localhost ~]<span class="hljs-comment">#</span>
</div></code></pre>
<p>yum 安装 epel 源中的 nginx 1.12.2 成功！</p>
<ol start="2">
<li>我们准备一台新装的 CentOS7.6 服务器， 关闭 selinux， 清空 iptables 规则， 使用 yum 安装官方提供的最新稳定版 nginx</li>
</ol>
<pre class="hljs"><code><div>[root@localhost ~]<span class="hljs-comment"># getenforce </span>
Permissive
[root@localhost ~]<span class="hljs-comment"># iptables -vnL</span>
Chain INPUT (policy ACCEPT 8233 packets, 37M bytes)
 pkts bytes target     prot opt <span class="hljs-keyword">in</span>     out     <span class="hljs-built_in">source</span>               destination         

Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt <span class="hljs-keyword">in</span>     out     <span class="hljs-built_in">source</span>               destination         

Chain OUTPUT (policy ACCEPT 7777 packets, 527K bytes)
 pkts bytes target     prot opt <span class="hljs-keyword">in</span>     out     <span class="hljs-built_in">source</span>               destination         
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment">#</span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># yum install epel-release</span>
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirrors.tuna.tsinghua.edu.cn
 * epel: mirrors.tuna.tsinghua.edu.cn
 * extras: mirror.bit.edu.cn
 * updates: mirrors.tuna.tsinghua.edu.cn
Package epel-release-7-11.noarch already installed and latest version
Nothing to <span class="hljs-keyword">do</span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># vi /etc/yum.repos.d/nginx.repo</span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># cat /etc/yum.repos.d/nginx.repo</span>
[nginx-stable]
name=nginx stable repo
baseurl=http://nginx.org/packages/centos/<span class="hljs-variable">$releasever</span>/<span class="hljs-variable">$basearch</span>/
gpgcheck=1
enabled=1
gpgkey=https://nginx.org/keys/nginx_signing.key
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment">#</span>
[root@localhost ~]<span class="hljs-comment"># yum list nginx</span>
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirrors.tuna.tsinghua.edu.cn
 * epel: mirrors.tuna.tsinghua.edu.cn
 * extras: mirror.bit.edu.cn
 * updates: mirrors.tuna.tsinghua.edu.cn
Available Packages
nginx.x86_64                         1:1.16.0-1.el7.ngx                          nginx-stable
[root@localhost ~]<span class="hljs-comment">#</span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># yum install -y nginx</span>
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirrors.tuna.tsinghua.edu.cn
 * epel: mirrors.tuna.tsinghua.edu.cn
 * extras: mirror.bit.edu.cn
 * updates: mirrors.tuna.tsinghua.edu.cn
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package nginx.x86_64 1:1.16.0-1.el7.ngx will be installed
--&gt; Finished Dependency Resolution

Dependencies Resolved

=============================================================================================
 Package         Arch             Version                       Repository              Size
=============================================================================================
Installing:
 nginx           x86_64           1:1.16.0-1.el7.ngx            nginx-stable           766 k

Transaction Summary
=============================================================================================
Install  1 Package

Total download size: 766 k
Installed size: 2.7 M
Downloading packages:
warning: /var/cache/yum/x86_64/7/nginx-stable/packages/nginx-1.16.0-1.el7.ngx.x86_64.rpm: Header V4 RSA/SHA1 Signature, key ID 7bd9bf62: NOKEY
Public key <span class="hljs-keyword">for</span> nginx-1.16.0-1.el7.ngx.x86_64.rpm is not installed
nginx-1.16.0-1.el7.ngx.x86_64.rpm                                     | 766 kB  00:00:21     
Retrieving key from https://nginx.org/keys/nginx_signing.key
Importing GPG key 0x7BD9BF62:
 Userid     : <span class="hljs-string">"nginx signing key &lt;signing-key@nginx.com&gt;"</span>
 Fingerprint: 573b fd6b 3d8f bc64 1079 a6ab abf5 bd82 7bd9 bf62
 From       : https://nginx.org/keys/nginx_signing.key
Running transaction check
Running transaction <span class="hljs-built_in">test</span>
Transaction <span class="hljs-built_in">test</span> succeeded
Running transaction
  Installing : 1:nginx-1.16.0-1.el7.ngx.x86_64                                           1/1 
----------------------------------------------------------------------

Thanks <span class="hljs-keyword">for</span> using nginx!

Please find the official documentation <span class="hljs-keyword">for</span> nginx here:
* http://nginx.org/en/docs/

Please subscribe to nginx-announce mailing list to get
the most important news about nginx:
* http://nginx.org/en/support.html

Commercial subscriptions <span class="hljs-keyword">for</span> nginx are available on:
* http://nginx.com/products/

----------------------------------------------------------------------
  Verifying  : 1:nginx-1.16.0-1.el7.ngx.x86_64                                           1/1 

Installed:
  nginx.x86_64 1:1.16.0-1.el7.ngx                                                            

Complete!
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment">#</span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># systemctl start nginx</span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># ss -ntl</span>
State       Recv-Q Send-Q Local Address:Port                Peer Address:Port              
LISTEN      0      128                *:80                             *:*                  
LISTEN      0      128                *:22                             *:*                  
LISTEN      0      100        127.0.0.1:25                             *:*                  
LISTEN      0      128               :::22                            :::*                  
LISTEN      0      100              ::1:25                            :::*                  
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># curl 127.0.0.1</span>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome to nginx!&lt;/title&gt;
&lt;style&gt;
    body {
        width: 35em;
        margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;
&lt;p&gt;If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.&lt;/p&gt;

&lt;p&gt;For online documentation and support please refer to
&lt;a href=<span class="hljs-string">"http://nginx.org/"</span>&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
Commercial support is available at
&lt;a href=<span class="hljs-string">"http://nginx.com/"</span>&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Thank you <span class="hljs-keyword">for</span> using nginx.&lt;/em&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment">#</span>
</div></code></pre>
<p>使用 Nginx 安装官网最新稳定版 nginx 1.16 成功！</p>
<h4 id="912-centos76-%E4%B8%AD-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85-nginx">9.1.2 CentOS7.6 中 编译安装 Nginx</h4>
<ol>
<li>我们准备一台新装的 CentOS7.6 服务器， 关闭 selinux， 清空 iptables 规则, 安装编译 nginx 依赖的软件包</li>
</ol>
<pre class="hljs"><code><div>[root@localhost ~]<span class="hljs-comment"># yum remove -y firewalld</span>
Loaded plugins: fastestmirror
No Match <span class="hljs-keyword">for</span> argument: firewalld
No Packages marked <span class="hljs-keyword">for</span> removal
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># iptables -vnL</span>
Chain INPUT (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt <span class="hljs-keyword">in</span>     out     <span class="hljs-built_in">source</span>               destination         

Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt <span class="hljs-keyword">in</span>     out     <span class="hljs-built_in">source</span>               destination         

Chain OUTPUT (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt <span class="hljs-keyword">in</span>     out     <span class="hljs-built_in">source</span>               destination         
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># setenforce 0</span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># getenforce </span>
Permissive
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment">#</span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># yum install epel-release</span>
Loaded plugins: fastestmirror
Determining fastest mirrors
 * base: mirror.bit.edu.cn
 * extras: mirrors.huaweicloud.com
 * updates: mirrors.huaweicloud.com
base                                                                  | 3.6 kB  00:00:00     
extras                                                                | 3.4 kB  00:00:00     
updates                                                               | 3.4 kB  00:00:00     
(1/4): base/7/x86_64/group_gz                                         | 166 kB  00:00:00     
(2/4): updates/7/x86_64/primary_db                                    | 5.0 MB  00:00:00     
(3/4): base/7/x86_64/primary_db                                       | 6.0 MB  00:00:00     
(4/4): extras/7/x86_64/primary_db                                     | 200 kB  00:00:04     
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package epel-release.noarch 0:7-11 will be installed
--&gt; Finished Dependency Resolution

Dependencies Resolved

=============================================================================================
 Package                   Arch                Version             Repository           Size
=============================================================================================
Installing:
 epel-release              noarch              7-11                extras               15 k

Transaction Summary
=============================================================================================
Install  1 Package

Total download size: 15 k
Installed size: 24 k
Is this ok [y/d/N]: y
Downloading packages:
warning: /var/cache/yum/x86_64/7/extras/packages/epel-release-7-11.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEY
Public key <span class="hljs-keyword">for</span> epel-release-7-11.noarch.rpm is not installed
epel-release-7-11.noarch.rpm                                          |  15 kB  00:00:00     
Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7
Importing GPG key 0xF4A80EB5:
 Userid     : <span class="hljs-string">"CentOS-7 Key (CentOS 7 Official Signing Key) &lt;security@centos.org&gt;"</span>
 Fingerprint: 6341 ab27 53d7 8a78 a7c2 7bb1 24c6 a8a7 f4a8 0eb5
 Package    : centos-release-7-6.1810.2.el7.centos.x86_64 (@anaconda)
 From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7
Is this ok [y/N]: y
Running transaction check
Running transaction <span class="hljs-built_in">test</span>
Transaction <span class="hljs-built_in">test</span> succeeded
Running transaction
  Installing : epel-release-7-11.noarch                                                  1/1 
  Verifying  : epel-release-7-11.noarch                                                  1/1 

Installed:
  epel-release.noarch 0:7-11                                                                 

Complete!
[root@localhost ~]<span class="hljs-comment"># yum install wget</span>
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
epel/x86_64/metalink                                                  | 7.1 kB  00:00:00     
 * base: mirror.bit.edu.cn
 * epel: mirrors.tuna.tsinghua.edu.cn
 * extras: mirrors.huaweicloud.com
 * updates: mirrors.huaweicloud.com
epel                                                                  | 4.7 kB  00:00:00     
(1/3): epel/x86_64/group_gz                                           |  88 kB  00:00:00     
(2/3): epel/x86_64/updateinfo                                         | 1.0 MB  00:00:00     
(3/3): epel/x86_64/primary_db                                         | 6.7 MB  00:00:00     
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package wget.x86_64 0:1.14-18.el7_6.1 will be installed
--&gt; Finished Dependency Resolution

Dependencies Resolved

=============================================================================================
 Package          Arch               Version                       Repository           Size
=============================================================================================
Installing:
 wget             x86_64             1.14-18.el7_6.1               updates             547 k

Transaction Summary
=============================================================================================
Install  1 Package

Total download size: 547 k
Installed size: 2.0 M
Is this ok [y/d/N]: y
Downloading packages:
wget-1.14-18.el7_6.1.x86_64.rpm                                       | 547 kB  00:00:04     
Running transaction check
Running transaction <span class="hljs-built_in">test</span>
Transaction <span class="hljs-built_in">test</span> succeeded
Running transaction
  Installing : wget-1.14-18.el7_6.1.x86_64                                               1/1 
  Verifying  : wget-1.14-18.el7_6.1.x86_64                                               1/1 

Installed:
  wget.x86_64 0:1.14-18.el7_6.1                                                              

Complete!
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment">#</span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># yum install -y vim lrzsz tree screen psmisc lsof tcpdump wget ntpdate gcc gcc-c++ glibc glibc-devel pcre pcre-devel openssl openssl-devel systemd-devel net-tools iotop bc zip unzip zlib-devel bash-completion nfs-utils automake libxml2 libxml2-devel libxslt libxslt-devel perl perl-ExtUtils-Embed</span>
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirror.bit.edu.cn
 * epel: mirrors.tuna.tsinghua.edu.cn
 * extras: mirrors.huaweicloud.com
 * updates: mirrors.huaweicloud.com
Package wget-1.14-18.el7_6.1.x86_64 already installed and latest version
Package pcre-8.32-17.el7.x86_64 already installed and latest version
Package libxml2-2.9.1-6.el7_2.3.x86_64 already installed and latest version
Package libxslt-1.1.28-5.el7.x86_64 already installed and latest version
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package automake.noarch 0:1.13.4-3.el7 will be installed
--&gt; Processing Dependency: autoconf &gt;= 2.65 <span class="hljs-keyword">for</span> package: automake-1.13.4-3.el7.noarch
--&gt; Processing Dependency: perl(threads) <span class="hljs-keyword">for</span> package: automake-1.13.4-3.el7.noarch
.
.
.省略部分安装输出信息......
.
.
  Verifying  : glibc-common-2.17-260.el7.x86_64                                      124/124 

Installed:
  automake.noarch 0:1.13.4-3.el7            bash-completion.noarch 1:2.1-6.el7               
  bc.x86_64 0:1.06.95-13.el7                gcc.x86_64 0:4.8.5-36.el7_6.2                    
  gcc-c++.x86_64 0:4.8.5-36.el7_6.2         glibc-devel.x86_64 0:2.17-260.el7_6.5            
  iotop.noarch 0:0.6-4.el7                  libxml2-devel.x86_64 0:2.9.1-6.el7_2.3           
  libxslt-devel.x86_64 0:1.1.28-5.el7       lrzsz.x86_64 0:0.12.20-36.el7                    
  lsof.x86_64 0:4.87-6.el7                  net-tools.x86_64 0:2.0-0.24.20131004git.el7      
  nfs-utils.x86_64 1:1.3.0-0.61.el7         ntpdate.x86_64 0:4.2.6p5-28.el7.centos           
  openssl-devel.x86_64 1:1.0.2k-16.el7_6.1  pcre-devel.x86_64 0:8.32-17.el7                  
  perl.x86_64 4:5.16.3-294.el7_6            perl-ExtUtils-Embed.noarch 0:1.30-294.el7_6      
  psmisc.x86_64 0:22.20-15.el7              screen.x86_64 0:4.1.0-0.25.20120314git3c2946.el7 
  systemd-devel.x86_64 0:219-62.el7_6.6     tcpdump.x86_64 14:4.9.2-3.el7                    
  tree.x86_64 0:1.6.0-10.el7                unzip.x86_64 0:6.0-19.el7                        
  vim-enhanced.x86_64 2:7.4.160-5.el7       zip.x86_64 0:3.0-11.el7                          
  zlib-devel.x86_64 0:1.2.7-18.el7         

Dependency Installed:
  autoconf.noarch 0:2.69-11.el7                  cpp.x86_64 0:4.8.5-36.el7_6.2               
  gdbm-devel.x86_64 0:1.10-8.el7                 glibc-headers.x86_64 0:2.17-260.el7_6.5     
  gpm-libs.x86_64 0:1.20.7-5.el7                 gssproxy.x86_64 0:0.7.0-21.el7              
  kernel-headers.x86_64 0:3.10.0-957.12.2.el7    keyutils.x86_64 0:1.5.8-3.el7               
  keyutils-libs-devel.x86_64 0:1.5.8-3.el7       krb5-devel.x86_64 0:1.15.1-37.el7_6         
  libbasicobjects.x86_64 0:0.1.1-32.el7          libcollection.x86_64 0:0.7.0-32.el7         
  libcom_err-devel.x86_64 0:1.42.9-13.el7        libdb-devel.x86_64 0:5.3.21-24.el7          
  libevent.x86_64 0:2.0.21-4.el7                 libgcrypt-devel.x86_64 0:1.5.3-14.el7       
  libgpg-error-devel.x86_64 0:1.12-3.el7         libini_config.x86_64 0:1.3.1-32.el7         
  libkadm5.x86_64 0:1.15.1-37.el7_6              libmpc.x86_64 0:1.0.1-3.el7                 
  libnfsidmap.x86_64 0:0.25-19.el7               libpath_utils.x86_64 0:0.2.1-32.el7         
  libpcap.x86_64 14:1.5.3-11.el7                 libref_array.x86_64 0:0.1.5-32.el7          
  libselinux-devel.x86_64 0:2.5-14.1.el7         libsepol-devel.x86_64 0:2.5-10.el7          
  libstdc++-devel.x86_64 0:4.8.5-36.el7_6.2      libtirpc.x86_64 0:0.2.4-0.15.el7            
  libverto-devel.x86_64 0:0.2.5-4.el7            libverto-libevent.x86_64 0:0.2.5-4.el7      
  m4.x86_64 0:1.4.16-10.el7                      mpfr.x86_64 0:3.1.1-4.el7                   
  perl-Carp.noarch 0:1.26-244.el7                perl-Data-Dumper.x86_64 0:2.145-3.el7       
  perl-Encode.x86_64 0:2.51-7.el7                perl-Exporter.noarch 0:5.68-3.el7           
  perl-ExtUtils-Install.noarch 0:1.58-294.el7_6  perl-ExtUtils-MakeMaker.noarch 0:6.68-3.el7 
  perl-ExtUtils-Manifest.noarch 0:1.61-244.el7   perl-ExtUtils-ParseXS.noarch 1:3.18-3.el7   
  perl-File-Path.noarch 0:2.09-2.el7             perl-File-Temp.noarch 0:0.23.01-3.el7       
  perl-Filter.x86_64 0:1.49-3.el7                perl-Getopt-Long.noarch 0:2.40-3.el7        
  perl-HTTP-Tiny.noarch 0:0.033-3.el7            perl-PathTools.x86_64 0:3.40-5.el7          
  perl-Pod-Escapes.noarch 1:1.04-294.el7_6       perl-Pod-Perldoc.noarch 0:3.20-4.el7        
  perl-Pod-Simple.noarch 1:3.28-4.el7            perl-Pod-Usage.noarch 0:1.63-3.el7          
  perl-Scalar-List-Utils.x86_64 0:1.27-248.el7   perl-Socket.x86_64 0:2.010-4.el7            
  perl-Storable.x86_64 0:2.45-3.el7              perl-Test-Harness.noarch 0:3.28-3.el7       
  perl-Text-ParseWords.noarch 0:3.29-4.el7       perl-Thread-Queue.noarch 0:3.02-2.el7       
  perl-Time-HiRes.x86_64 4:1.9725-3.el7          perl-Time-Local.noarch 0:1.2300-2.el7       
  perl-constant.noarch 0:1.27-2.el7              perl-devel.x86_64 4:5.16.3-294.el7_6        
  perl-libs.x86_64 4:5.16.3-294.el7_6            perl-macros.x86_64 4:5.16.3-294.el7_6       
  perl-parent.noarch 1:0.225-244.el7             perl-podlators.noarch 0:2.5.1-3.el7         
  perl-threads.x86_64 0:1.87-4.el7               perl-threads-shared.x86_64 0:1.43-6.el7     
  pyparsing.noarch 0:1.5.6-9.el7                 quota.x86_64 1:4.01-17.el7                  
  quota-nls.noarch 1:4.01-17.el7                 rpcbind.x86_64 0:0.2.0-47.el7               
  systemtap-sdt-devel.x86_64 0:3.3-3.el7         tcp_wrappers.x86_64 0:7.6-77.el7            
  vim-common.x86_64 2:7.4.160-5.el7              vim-filesystem.x86_64 2:7.4.160-5.el7       
  xz-devel.x86_64 0:5.2.2-1.el7                 

Updated:
  glibc.x86_64 0:2.17-260.el7_6.5             openssl.x86_64 1:1.0.2k-16.el7_6.1            

Dependency Updated:
  glibc-common.x86_64 0:2.17-260.el7_6.5       krb5-libs.x86_64 0:1.15.1-37.el7_6           
  libgcc.x86_64 0:4.8.5-36.el7_6.2             libgomp.x86_64 0:4.8.5-36.el7_6.2            
  libstdc++.x86_64 0:4.8.5-36.el7_6.2          openssl-libs.x86_64 1:1.0.2k-16.el7_6.1      
  systemd.x86_64 0:219-62.el7_6.6              systemd-libs.x86_64 0:219-62.el7_6.6         
  systemd-sysv.x86_64 0:219-62.el7_6.6        

Complete!
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment">#</span>
</div></code></pre>
<p>下载 nginx 源码包， 解压编译安装:</p>
<pre class="hljs"><code><div>[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># wget http://nginx.org/download/nginx-1.16.0.tar.gz</span>
--2019-05-29 21:55:10--  http://nginx.org/download/nginx-1.16.0.tar.gz
Resolving nginx.org (nginx.org)... 95.211.80.227, 62.210.92.35, 2001:1af8:4060:a004:21::e3
Connecting to nginx.org (nginx.org)|95.211.80.227|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 1032345 (1008K) [application/octet-stream]
Saving to: ‘nginx-1.16.0.tar.gz’

100%[===================================================&gt;] 1,032,345   73.5KB/s   <span class="hljs-keyword">in</span> 36s    

2019-05-29 21:55:47 (28.1 KB/s) - ‘nginx-1.16.0.tar.gz’ saved [1032345/1032345]

[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment">#  </span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># ll</span>
total 1016
-rw-------. 1 root root    1368 Apr 27 16:21 anaconda-ks.cfg
-rw-r--r--. 1 root root 1032345 Apr 23 21:58 nginx-1.16.0.tar.gz
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment">#</span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># tar xf nginx-1.16.0.tar.gz </span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># ll</span>
total 1016
-rw-------. 1 root root    1368 Apr 27 16:21 anaconda-ks.cfg
drwxr-xr-x. 8 1001 1001     158 Apr 23 21:13 nginx-1.16.0
-rw-r--r--. 1 root root 1032345 Apr 23 21:58 nginx-1.16.0.tar.gz
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># cd nginx-1.16.0</span>
[root@localhost nginx-1.16.0]<span class="hljs-comment"># </span>
[root@localhost nginx-1.16.0]<span class="hljs-comment">#</span>
[root@localhost nginx-1.16.0]<span class="hljs-comment"># </span>
[root@localhost nginx-1.16.0]<span class="hljs-comment"># </span>
[root@localhost nginx-1.16.0]<span class="hljs-comment"># ./configure --prefix=/apps/nginx --user=nginx --group=nginx --with-http_ssl_module --with-http_v2_module --with-http_realip_module --with-http_stub_status_module --with-http_gzip_static_module --with-pcre --with-stream --with-stream_ssl_module --with-stream_realip_module --with-debug</span>
checking <span class="hljs-keyword">for</span> OS
 + Linux 3.10.0-957.el7.x86_64 x86_64
checking <span class="hljs-keyword">for</span> C compiler ... found
 + using GNU C compiler
 + gcc version: 4.8.5 20150623 (Red Hat 4.8.5-36) (GCC) 
checking <span class="hljs-keyword">for</span> gcc -pipe switch ... found
.
.
.省略部分编译检查输出信息.....
.
.
checking <span class="hljs-keyword">for</span> PCRE library ... found
checking <span class="hljs-keyword">for</span> PCRE JIT support ... found
checking <span class="hljs-keyword">for</span> OpenSSL library ... found
checking <span class="hljs-keyword">for</span> zlib library ... found
creating objs/Makefile

Configuration summary
  + using system PCRE library
  + using system OpenSSL library
  + using system zlib library

  nginx path prefix: <span class="hljs-string">"/apps/nginx"</span>
  nginx binary file: <span class="hljs-string">"/apps/nginx/sbin/nginx"</span>
  nginx modules path: <span class="hljs-string">"/apps/nginx/modules"</span>
  nginx configuration prefix: <span class="hljs-string">"/apps/nginx/conf"</span>
  nginx configuration file: <span class="hljs-string">"/apps/nginx/conf/nginx.conf"</span>
  nginx pid file: <span class="hljs-string">"/apps/nginx/logs/nginx.pid"</span>
  nginx error <span class="hljs-built_in">log</span> file: <span class="hljs-string">"/apps/nginx/logs/error.log"</span>
  nginx http access <span class="hljs-built_in">log</span> file: <span class="hljs-string">"/apps/nginx/logs/access.log"</span>
  nginx http client request body temporary files: <span class="hljs-string">"client_body_temp"</span>
  nginx http proxy temporary files: <span class="hljs-string">"proxy_temp"</span>
  nginx http fastcgi temporary files: <span class="hljs-string">"fastcgi_temp"</span>
  nginx http uwsgi temporary files: <span class="hljs-string">"uwsgi_temp"</span>
  nginx http scgi temporary files: <span class="hljs-string">"scgi_temp"</span>

[root@localhost nginx-1.16.0]<span class="hljs-comment">#</span>
[root@localhost nginx-1.16.0]<span class="hljs-comment"># </span>
[root@localhost nginx-1.16.0]<span class="hljs-comment"># </span>
[root@localhost nginx-1.16.0]<span class="hljs-comment"># make -j 4 </span>
.
.
.省略部分编译输出信息.....
.
.
objs/src/stream/ngx_stream_map_module.o \
objs/src/stream/ngx_stream_split_clients_module.o \
objs/src/stream/ngx_stream_return_module.o \
objs/src/stream/ngx_stream_upstream_hash_module.o \
objs/src/stream/ngx_stream_upstream_least_conn_module.o \
objs/src/stream/ngx_stream_upstream_random_module.o \
objs/src/stream/ngx_stream_upstream_zone_module.o \
objs/ngx_modules.o \
-ldl -lpthread -lcrypt -lpcre -lssl -lcrypto -ldl -lpthread -lz \
-Wl,-E
sed -e s|%%PREFIX%%|/apps/nginx| \
	-e s|%%PID_PATH%%|/apps/nginx/logs/nginx.pid| \
	-e s|%%CONF_PATH%%|/apps/nginx/conf/nginx.conf| \
	-e s|%%ERROR_LOG_PATH%%|/apps/nginx/logs/error.log| \
	&lt; man/nginx.8 &gt; objs/nginx.8
make[1]: Leaving directory /root/nginx-1.16.0
[root@localhost nginx-1.16.0]<span class="hljs-comment">#</span>
[root@localhost nginx-1.16.0]<span class="hljs-comment"># </span>
[root@localhost nginx-1.16.0]<span class="hljs-comment">#</span>
[root@localhost nginx-1.16.0]<span class="hljs-comment"># make install</span>
make -f objs/Makefile install
make[1]: Entering directory /root/nginx-1.16.0
<span class="hljs-built_in">test</span> -d /apps/nginx || mkdir -p /apps/nginx
<span class="hljs-built_in">test</span> -d /apps/nginx/sbin \

.
.
.省略部分编译安装输出信息....
.
.
<span class="hljs-built_in">test</span> -d /app/nginx/logs \
	|| mkdir -p /app/nginx/logs
<span class="hljs-built_in">test</span> -d /app/nginx/html \
	|| cp -R html /app/nginx
<span class="hljs-built_in">test</span> -d /app/nginx/logs \
	|| mkdir -p /app/nginx/logs
make[1]: Leaving directory /root/nginx-1.16.0
[root@localhost nginx-1.16.0]<span class="hljs-comment"># </span>
[root@localhost nginx-1.16.0]<span class="hljs-comment">#</span>
[root@localhost nginx-1.16.0]<span class="hljs-comment"># </span>
[root@localhost nginx-1.16.0]<span class="hljs-comment"># useradd nginx -s /sbin/nologin -u 2000</span>
[root@localhost nginx-1.16.0]<span class="hljs-comment"># </span>
[root@localhost nginx-1.16.0]<span class="hljs-comment"># chown nginx.nginx -R /apps/nginx/</span>
[root@localhost nginx-1.16.0]<span class="hljs-comment">#</span>
[root@localhost nginx-1.16.0]<span class="hljs-comment"># /apps/nginx/sbin/nginx -V</span>
nginx version: nginx/1.16.0
built by gcc 4.8.5 20150623 (Red Hat 4.8.5-36) (GCC) 
built with OpenSSL 1.0.2k-fips  26 Jan 2017
TLS SNI support enabled
configure arguments: --prefix=/apps/nginx --user=nginx --group=nginx --with-http_ssl_module --with-http_v2_module --with-http_realip_module --with-http_stub_status_module --with-http_gzip_static_module --with-pcre --with-stream --with-stream_ssl_module --with-stream_realip_module --with-debug
[root@localhost nginx-1.16.0]<span class="hljs-comment">#</span>
[root@localhost nginx-1.16.0]<span class="hljs-comment">#</span>
[root@localhost nginx-1.16.0]<span class="hljs-comment"># </span>
[root@localhost nginx-1.16.0]<span class="hljs-comment"># vi /usr/lib/systemd/system/nginx.service</span>
[root@localhost nginx-1.16.0]<span class="hljs-comment"># </span>
[root@localhost nginx-1.16.0]<span class="hljs-comment"># cat /usr/lib/systemd/system/nginx.service</span>
[Unit]
Description=The nginx HTTP and reverse proxy server
After=network.target remote-fs.target nss-lookup.target
[Service]
Type=forking
PIDFile=/apps/nginx/logs/nginx.pid
<span class="hljs-comment"># Nginx will fail to start if /run/nginx.pid already exists but has the wrong</span>
<span class="hljs-comment"># SELinux context. This might happen when running `nginx -t` from the cmdline.</span>
<span class="hljs-comment"># https://bugzilla.redhat.com/show_bug.cgi?id=1268621</span>
ExecStartPre=/usr/bin/rm -f /apps/nginx/logs/nginx.pid
ExecStartPre=/apps/nginx/sbin/nginx -t
ExecStart=/apps/nginx/sbin/nginx
ExecReload=/bin/<span class="hljs-built_in">kill</span> -s HUP <span class="hljs-variable">$MAINPID</span>
<span class="hljs-comment">#KillSignal=SIGQUIT</span>
<span class="hljs-comment">#TimeoutStopSec=5</span>
KillMode=process
PrivateTmp=<span class="hljs-literal">true</span>
[Install]
WantedBy=multi-user.target
[root@localhost nginx-1.16.0]<span class="hljs-comment"># </span>
[root@localhost nginx-1.16.0]<span class="hljs-comment">#</span>
[root@localhost nginx-1.16.0]<span class="hljs-comment"># cd</span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># systemctl daemon-reload</span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># systemctl start nginx</span>
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># ss -ntl</span>
State       Recv-Q Send-Q Local Address:Port                Peer Address:Port              
LISTEN      0      128                *:111                            *:*                  
LISTEN      0      128                *:80                             *:*                  
LISTEN      0      128                *:22                             *:*                  
LISTEN      0      100        127.0.0.1:25                             *:*                  
LISTEN      0      128               :::111                           :::*                  
LISTEN      0      128               :::22                            :::*                  
LISTEN      0      100              ::1:25                            :::*                  
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment"># curl 127.0.0.1</span>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome to nginx!&lt;/title&gt;
&lt;style&gt;
    body {
        width: 35em;
        margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;
&lt;p&gt;If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.&lt;/p&gt;

&lt;p&gt;For online documentation and support please refer to
&lt;a href=<span class="hljs-string">"http://nginx.org/"</span>&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
Commercial support is available at
&lt;a href=<span class="hljs-string">"http://nginx.com/"</span>&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Thank you <span class="hljs-keyword">for</span> using nginx.&lt;/em&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
[root@localhost ~]<span class="hljs-comment"># </span>
[root@localhost ~]<span class="hljs-comment">#</span>
</div></code></pre>
<p>编译安装 nginx 成功！</p>

</body>
</html>
